<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		#editor,
		button,
		div {
			margin: 2em auto;
			display: block;
			width: 50%;

			-moz-tab-size: 4;
			-o-tab-size: 4;
			tab-size: 4;
		}
	</style>
</head>

<body>

	<textarea name="" id="editor" rows="10" onkeydown='preformat(event)'>
sdfsfsf
sdfsfs
sdf sdf
sf		sdf sdf
sf 		
	</textarea>
	<button onclick="format_text(event)">click for centered</button>
	<div style="text-align: center;">or press `ctrl + /` in textarea</div>

	<script src="macro__actions.js"></script>
	<script src="editor__tools.js"></script>
	<script>		

		var actions = {
			__proto__: actionsMacro,
			'/': (line) => {
				const undoFlag = line.match(/<center>[\s\S]*?<\/center>/);
				return {
					line: undoFlag ? line.replace(/<center>([\s\S]*?)<\/center>/, '$1') : '<center>' + line + '</center>',
					offset: '<center>'.length,
					undo: undoFlag
				}
			},
			'-': (line) => actions.begin('# ', line),
			'Tab': (line, event) => actions.begin('	', line, event)
		}

		window.addEventListener('load', () => editor.focus());
	</script>
</body>

</html>